{
  "version": 3,
  "sources": ["../../src/main/app.ts"],
  "sourcesContent": ["import { app, BrowserWindow, ipcMain, Menu } from \"electron\"\r\nimport path from 'path'\r\nimport { fileURLToPath } from 'url'\r\n\r\n\r\n\r\nconst getDirName = () => {\r\n  if (process.env.ENV_NOW == 'dev') {\r\n    const __filename = fileURLToPath(import.meta.url)\r\n    const dirname = path.dirname(__filename)\r\n    return dirname\r\n  } else {\r\n    return __dirname\r\n  }\r\n}\r\n\r\n\r\n\r\nconst log = (...args: any[]) => {\r\n  console.log(`[${(new Date).toLocaleString()}]`, ...args)\r\n}\r\n\r\nlog(\"electron start\", process.env.ENV_NOW)\r\n\r\n// app.setAsDefaultProtocolClient('electron')\r\n\r\nlet url: string\r\nif (process.env.ENV_NOW == 'dev') {\r\n  url = `http://localhost:${process.env.WEB_PORT}/`\r\n} else if (process.env.ENV_NOW == 'prod') {\r\n  url = `file://${path.join(getDirName(), 'index.html')}`\r\n}\r\n\r\n\r\nlet mainWindow\r\n\r\n\r\n\r\n\r\n\r\napp.on(\"ready\", () => {\r\n  mainWindow = new BrowserWindow({\r\n    width: 800,\r\n    height: 600,\r\n    webPreferences: {\r\n      preload: path.join(getDirName(), 'preload.js'),\r\n    }\r\n  });\r\n  mainWindow.loadURL(url)\r\n  mainWindow.webContents.openDevTools()\r\n  log(`electron load ${url}`)\r\n\r\n\r\n\r\n  ///////////////////////////////////\r\n\r\n  ipcMain.handle('system:exit', () => {\r\n    app.quit()\r\n  })\r\n\r\n  let menu = Menu.buildFromTemplate([\r\n    {\r\n      label: '\u6587\u4EF6',\r\n      submenu: [\r\n        {\r\n          label: '\u6253\u5F00\u6587\u4EF6',\r\n          click() {\r\n            console.log('open folder');\r\n          }\r\n        },\r\n        {\r\n          label: '\u5173\u95ED\u6587\u4EF6\u5939'\r\n        },\r\n        {\r\n          type: 'separator'\r\n        },\r\n        {\r\n          label: '\u6700\u5C0F\u5316',\r\n          role: 'minimize',\r\n        },\r\n        {\r\n          label: '\u5173\u4E8E',\r\n          role: 'about'\r\n        },\r\n      ]\r\n    },\r\n    {\r\n      label: '\u7F16\u8F91',\r\n      toolTip: '\u5E38\u89C4\u7F16\u8F91',\r\n      submenu: [\r\n        {\r\n          label: '\u590D\u5236',\r\n          role: 'copy'\r\n        },\r\n        {\r\n          label: '\u526A\u5207',\r\n          role: 'cut'\r\n        },\r\n        {\r\n          label: '\u7C98\u8D34',\r\n          role: 'paste'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      label: '\u9009\u9879',\r\n      submenu: [\r\n        {\r\n          label: '\u9009\u98791',\r\n          type: 'checkbox',\r\n          checked: true,\r\n        },\r\n        {\r\n          label: '\u9009\u98792',\r\n          type: 'checkbox',\r\n        },\r\n        {\r\n          label: '\u9009\u98793',\r\n          type: 'checkbox',\r\n        },\r\n        {\r\n\r\n          type: 'separator',\r\n        },\r\n        {\r\n          label: '\u9009\u98791',\r\n          type: 'radio'\r\n        },\r\n        {\r\n          label: '\u9009\u98792',\r\n          type: 'radio'\r\n        },\r\n        {\r\n          label: '\u5B50\u83DC\u5355',\r\n          type: 'submenu',\r\n          role: 'windowMenu',\r\n        },\r\n        {\r\n          label: '\u5176\u4ED6',\r\n          type: 'submenu',\r\n          submenu: [\r\n            // { label: '\u5B50\u83DC\u53551', icon: './img/sys_cpu.png', accelerator: 'ctrl + o', click() { console.log(1); } },\r\n            { label: '\u5B50\u83DC\u53552' }\r\n          ]\r\n        }\r\n      ]\r\n    }\r\n  ])\r\n\r\n  Menu.setApplicationMenu(menu)\r\n\r\n\r\n})\r\n"],
  "mappings": ";AAAA,SAAS,KAAK,eAAe,SAAS,YAAY;AAClD,OAAO,UAAU;AACjB,SAAS,qBAAqB;AAI9B,IAAM,aAAa,MAAM;AACvB,MAAI,QAAQ,IAAI,WAAW,OAAO;AAChC,UAAM,aAAa,cAAc,YAAY,GAAG;AAChD,UAAM,UAAU,KAAK,QAAQ,UAAU;AACvC,WAAO;AAAA,EACT,OAAO;AACL,WAAO;AAAA,EACT;AACF;AAIA,IAAM,MAAM,IAAI,SAAgB;AAC9B,UAAQ,IAAI,KAAK,oBAAI,QAAM,eAAe,CAAC,KAAK,GAAG,IAAI;AACzD;AAEA,IAAI,kBAAkB,QAAQ,IAAI,OAAO;AAIzC,IAAI;AACJ,IAAI,QAAQ,IAAI,WAAW,OAAO;AAChC,QAAM,oBAAoB,QAAQ,IAAI,QAAQ;AAChD,WAAW,QAAQ,IAAI,WAAW,QAAQ;AACxC,QAAM,UAAU,KAAK,KAAK,WAAW,GAAG,YAAY,CAAC;AACvD;AAGA,IAAI;AAMJ,IAAI,GAAG,SAAS,MAAM;AACpB,eAAa,IAAI,cAAc;AAAA,IAC7B,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,gBAAgB;AAAA,MACd,SAAS,KAAK,KAAK,WAAW,GAAG,YAAY;AAAA,IAC/C;AAAA,EACF,CAAC;AACD,aAAW,QAAQ,GAAG;AACtB,aAAW,YAAY,aAAa;AACpC,MAAI,iBAAiB,GAAG,EAAE;AAM1B,UAAQ,OAAO,eAAe,MAAM;AAClC,QAAI,KAAK;AAAA,EACX,CAAC;AAED,MAAI,OAAO,KAAK,kBAAkB;AAAA,IAChC;AAAA,MACE,OAAO;AAAA,MACP,SAAS;AAAA,QACP;AAAA,UACE,OAAO;AAAA,UACP,QAAQ;AACN,oBAAQ,IAAI,aAAa;AAAA,UAC3B;AAAA,QACF;AAAA,QACA;AAAA,UACE,OAAO;AAAA,QACT;AAAA,QACA;AAAA,UACE,MAAM;AAAA,QACR;AAAA,QACA;AAAA,UACE,OAAO;AAAA,UACP,MAAM;AAAA,QACR;AAAA,QACA;AAAA,UACE,OAAO;AAAA,UACP,MAAM;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,IACA;AAAA,MACE,OAAO;AAAA,MACP,SAAS;AAAA,MACT,SAAS;AAAA,QACP;AAAA,UACE,OAAO;AAAA,UACP,MAAM;AAAA,QACR;AAAA,QACA;AAAA,UACE,OAAO;AAAA,UACP,MAAM;AAAA,QACR;AAAA,QACA;AAAA,UACE,OAAO;AAAA,UACP,MAAM;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAAA,IACA;AAAA,MACE,OAAO;AAAA,MACP,SAAS;AAAA,QACP;AAAA,UACE,OAAO;AAAA,UACP,MAAM;AAAA,UACN,SAAS;AAAA,QACX;AAAA,QACA;AAAA,UACE,OAAO;AAAA,UACP,MAAM;AAAA,QACR;AAAA,QACA;AAAA,UACE,OAAO;AAAA,UACP,MAAM;AAAA,QACR;AAAA,QACA;AAAA,UAEE,MAAM;AAAA,QACR;AAAA,QACA;AAAA,UACE,OAAO;AAAA,UACP,MAAM;AAAA,QACR;AAAA,QACA;AAAA,UACE,OAAO;AAAA,UACP,MAAM;AAAA,QACR;AAAA,QACA;AAAA,UACE,OAAO;AAAA,UACP,MAAM;AAAA,UACN,MAAM;AAAA,QACR;AAAA,QACA;AAAA,UACE,OAAO;AAAA,UACP,MAAM;AAAA,UACN,SAAS;AAAA;AAAA,YAEP,EAAE,OAAO,sBAAO;AAAA,UAClB;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EACF,CAAC;AAED,OAAK,mBAAmB,IAAI;AAG9B,CAAC;",
  "names": []
}
